{"mappings":"khBACA,IAAMA,EAAYC,SAASC,cAAc,eAIK,GAAD,OAAzCC,aAAaC,QAAQ,gBAA0B,CACjDC,QAAQC,IAAI,WAEZH,aAAaI,QAAQ,eAAgBC,KAAKC,UADvB,I,CAIN,IAATC,EAAcP,aAAaC,QAAQ,gBACzCO,aAAeH,KAAKI,MAAMF,GAGEP,aAAfU,WAAW,gBACxBF,aAAe,GACIG,MAAM,uDACtBC,MAAK,SAAAC,G,OAAYA,EAASC,M,IAC1BF,MAAK,SAAAG,GACJA,EAAKC,KAAI,SAAAC,GACP,I,IADUC,EAAKD,EAALC,MACDC,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAC1B,IAAIC,EAAOF,EAAMC,GAEjBX,aAAaa,KAAKD,E,KAGtBpB,aAAaI,QAAQ,eAAgBC,KAAKC,UAAUE,eACpD,IAAMc,EAActB,aAAaC,QAAQ,gBAEzCsB,EADgBlB,KAAKI,MAAMa,G,IAMP,SAAfC,EAA2Bf,GAClCN,QAAQC,IAAIK,EAAagB,QACG,IAAxBhB,EAAagB,OAOW,WAC5BC,IACA,IAAMC,EACJ,uHACF7B,EAAU8B,mBAAmB,aAAcD,E,CAVzCE,GACSpB,EAAagB,QAAU,GAYF,SAAFhB,GAC9BiB,IAIA,IAHA,IAAII,EAAY,GACZC,EAAW,GACXC,EAAc,GACTZ,EAAI,EAAGA,EAAIX,EAAagB,OAAQL,IAAK,CAG5C,IAFA,IAAMa,EAAOxB,EAAaW,GACtBc,EAAWD,EAAKE,UACXC,EAAI,EAAGA,EAAIF,EAAST,OAAQW,IACV,WAArBF,EAASE,GAAGC,OACdP,EAAYI,EAASE,GAAGE,KAED,gBAArBJ,EAASE,GAAGC,OACdN,EAAWG,EAASE,GAAGE,KAEA,aAArBJ,EAASE,GAAGC,OACdL,EAAcE,EAASE,GAAGE,KAIV,IAAdC,EAAY,wBACJC,OAD4BP,EAAKQ,IAAI,yBAKrCD,OAJAP,EAAKS,WAAW,+GAKjBF,OADCP,EAAKU,MAAM,0BAGkBH,OAF9BP,EAAKW,UAAU,yEAMnBJ,OAJkCpB,EAAE,4GAMlCoB,OAFFP,EAAKY,YAAY,0DAONL,OALTP,EAAKa,OAAO,0IAgBHN,OAXAV,EAAU,2VAsBVU,OAXAT,EAAS,uWAWGS,OAAZR,EAAY,4TAYhClC,EAAU8B,mBAAmB,aAAcW,E,CAG7BxC,SAASgD,iBAAiB,WAClCC,SAAQ,SAAAC,GACdA,EAAOC,iBAAiB,SAAS,WAC/B,IAAMC,EAAQF,EAAOG,QAAQD,MAC7B1C,EAAa4C,OAAOF,EAAO,GAC3BlD,aAAaI,QAAQ,eAAgBC,KAAKC,UAAUE,IACpDN,QAAQC,IAAIK,GACZe,EAA2Bf,E,OA9F7B6C,CAAuB7C,E,CAmG3B,SAASiB,IACP5B,EAAUyD,UAAY,E","sources":["src/shoppinglist.js"],"sourcesContent":["\nconst infoBlock = document.querySelector('#info-block');\n\n// перевіряємо наявність в local storage масиву книг\n// якщо нема то створюємо пустий масив та записуємо його у local storage\nif (localStorage.getItem('shoppingList') === null) {\n  console.log(\"5555555\")\n  let shoppingList = [];\n  localStorage.setItem('shoppingList', JSON.stringify(shoppingList));\n} \n// Зчитуємо массив з local storage\nconst storedArray = localStorage.getItem('shoppingList');\nshoppingList = JSON.parse(storedArray);\n// ===========================================================================\n// Створуємо масив через APi (тимчасово)\nlocalStorage.removeItem('shoppingList');\nshoppingList = [];\nconst fetchArray = fetch('https://books-backend.p.goit.global/books/top-books')\n  .then(response => response.json())\n  .then(data => {\n    data.map(({ books }) => {\n      for (let i = 0; i < 2; i++) {\n        let book = books[i];\n        \n        shoppingList.push(book);\n      }\n    });\n    localStorage.setItem('shoppingList', JSON.stringify(shoppingList));\n    const storedArray = localStorage.getItem('shoppingList');\n    const myArray = JSON.parse(storedArray);\n    checkingShoppingListLenght(myArray);\n  });\n// =================================================\n\n// Перевірка чи не пустий масив\nfunction checkingShoppingListLenght(shoppingList) {\n  console.log(shoppingList.length);\n  if (shoppingList.length === 0) {\n    createEmptyPage();\n  } else if (shoppingList.length >= 0) {\n    createShoppingListPage(shoppingList);\n  }\n}\n// функція створення пустої сторінки\nfunction createEmptyPage() {\n  clearList();\n  const emptyPage =\n    '<li><p>\"This page is empty, add some books and proceed to order.\"</p><img src=\"./images/IMG_9606 1.png\" alt=\"\"></li>';\n  infoBlock.insertAdjacentHTML('afterbegin', emptyPage);\n}\n// функція створення розмітки списку книг\nfunction createShoppingListPage(shoppingList) {\n  clearList();\n  let amazonUrl = '';\n  let appleUrl = '';\n  let bookshopUrl = '';\n  for (let i = 0; i < shoppingList.length; i++) {\n    const shop = shoppingList[i];\n    let buyLinks = shop.buy_links;\n    for (let j = 0; j < buyLinks.length; j++) {\n      if (buyLinks[j].name === 'Amazon') {\n        amazonUrl = buyLinks[j].url;\n      }\n      if (buyLinks[j].name === 'Apple Books') {\n        appleUrl = buyLinks[j].url;\n      }\n      if (buyLinks[j].name === 'Bookshop') {\n        bookshopUrl = buyLinks[j].url;\n      }\n    }\n    // розмітка списку карток\n    const listBooks = `<li class=\"book-card ${shop._id}\" >\n      <img src=\"${shop.book_image}\" alt=\"\" />\n      <div class=\"info\">\n        <div class=\"header-card\">\n          <div>\n            <h2>${shop.title}</h2>\n            <p>${shop.list_name}</p>\n          </div>\n          <button class=\"button\" data-index=\"${i}\">\n            <img src=\"./images/dump.png\" alt=\"\" />\n          </button>\n        </div>\n        <p>${shop.description}</p>\n        <div class=\"footer-card\">\n          <p>${shop.author}</p>\n          <ul class=\"book-shops\">\n            <li>\n              <a\n                class=\"book-shop\"\n                href=\"${amazonUrl}\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                aria-label=\"Іконка Amazon\"\n              >\n                <img src=\"./images/amazon.png\" alt=\"Іконка Amazon\" />\n              </a>\n            </li>\n            <li>\n              <a\n                class=\"book-shop\"\n                href=\"${appleUrl}\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                aria-label=\"Іконка Apple Books\"\n              >\n                <img src=\"./images/openbook.png\" alt=\"Іконка Apple Books\" />\n              </a>\n            </li>\n            <li>\n              <a\n                class=\"book-shop\"\n                href=\"${bookshopUrl}\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                aria-label=\"Іконка Bookshop\"\n              >\n                <img src=\"./images/bookshop.png\" alt=\"Іконка Bookshop\" />\n              </a>\n            </li>\n          </ul>\n        </div>\n      </div>\n    </li>`;\n    infoBlock.insertAdjacentHTML('afterbegin', listBooks);\n  }\n// видалення книг з масиву по кліку на кнопку \n  const buttons = document.querySelectorAll('.button');\n  buttons.forEach(button => {\n    button.addEventListener('click', () => {\n      const index = button.dataset.index;\n      shoppingList.splice(index, 1);\n      localStorage.setItem('shoppingList', JSON.stringify(shoppingList));\n      console.log(shoppingList);\n      checkingShoppingListLenght(shoppingList);\n      });\n  });\n}\n// очистка сторінки\nfunction clearList() {\n  infoBlock.innerHTML = '';\n}\n"],"names":["$5edc104e058cbfa5$var$infoBlock","document","querySelector","localStorage","getItem","console","log","setItem","JSON","stringify","$5edc104e058cbfa5$var$storedArray","shoppingList","parse","removeItem","fetch","then","response","json","data","map","param","books","i","book","push","storedArray1","$5edc104e058cbfa5$var$checkingShoppingListLenght","length","$5edc104e058cbfa5$var$clearList","emptyPage","insertAdjacentHTML","$5edc104e058cbfa5$var$createEmptyPage","amazonUrl","appleUrl","bookshopUrl","shop","buyLinks","buy_links","j","name","url","listBooks","concat","_id","book_image","title","list_name","description","author","querySelectorAll","forEach","button","addEventListener","index","dataset","splice","$5edc104e058cbfa5$var$createShoppingListPage","innerHTML"],"version":3,"file":"shoppinglist.6237a620.js.map"}