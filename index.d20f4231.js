!function(){function e(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},r={},a=n.parcelRequired7c6;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in r){var n=r[e];delete r[e];var a={id:e,exports:{}};return t[e]=a,n.call(a.exports,a,a.exports),a.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,n){r[e]=n},n.parcelRequired7c6=a);var o={categoriesList:document.querySelector(".categories__list")};fetch("https://books-backend.p.goit.global/books/category-list").then((function(e){return e.json()})).then((function(e){var n=e.map((function(e){var n=e.list_name;return'<li class = "categories__item"><a href = "#" data-category = "'.concat(n,'" class = "categories__link">').concat(n,"</a></li>")}));return o.categoriesList.insertAdjacentHTML("beforeend",n.join("")),console.log(n),n}));a("i8Q71"),a("8avRt"),a("k50rS"),a("5xh86"),a("7ghbD"),a("6mUVg");var c,i,s=a("bpxeT"),l=a("2TvXO"),u=(s=a("bpxeT"),l=a("2TvXO"),i=e(s)(e(l).mark((function n(t){var r,a;return e(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t,e.next=3,fetch("https://books-backend.p.goit.global/books/".concat(t));case 3:return r=e.sent,e.next=6,r.json();case 6:return a=e.sent,console.log(a),e.abrupt("return",a);case 9:case"end":return e.stop()}}),n)}))),function(e){return i.apply(this,arguments)}),d=new URL("file:///src/js/modal-window.js"),p=new URL("file:///src/js/modal-window.js"),g=new URL("file:///src/js/modal-window.js"),f=document.querySelector("#pop-btn");function m(e){return cardMarkup="\n      <ul class='bestseller-card'>\n      <div class = 'thumb'>\n         <img class='thumb__image' src='".concat(e.book_image,"' data-id='").concat(e._id,"'/>\n      <div class=\"thumb__overlay\">\n              <p class=\"thumb__overlay-tex\">QUICK VIEW</p>\n            </div> </div>\n      </li>\n      <ul class='bestseller-card__meta'>\n        <li class='bestseller-card__title'>").concat(e.title,"</li>\n        <li class='bestseller-card__author'>").concat(e.author,"</li>\n      </ul\n      \n      </li>\n      </ul>\n    ")}function y(e){return cardMarkup="\n      <ul class='bestseller-card --margin'>\n      <div class = 'thumb'>\n         <img class='thumb__image' src='".concat(e.book_image,"' data-id='").concat(e._id,"'/>\n      <div class=\"thumb__overlay\">\n              <p class=\"thumb__overlay-text\">QUICK VIEW</p>\n            </div> </div>\n      </li>\n      <ul class='bestseller-card__meta'>\n        <li class='bestseller-card__title'>").concat(e.title,"</li>\n        <li class='bestseller-card__author'>").concat(e.author,"</li>\n      </ul\n      \n      </li>\n      </ul>\n    ")}function h(e){return cardMarkup="\n    <button class='button__see-more' type='button' data-category='".concat(e,"'>See more</button>\n  ")}function b(){var e=document.querySelectorAll(".thumb__image"),n=!0,t=!1,r=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0)image=a.value,image.addEventListener("click",(function(e){var n;console.log("dasdsadsa:",e.target.dataset.id),n=e.target.dataset.id,u(n).then((function(e){bookInfo.insertAdjacentHTML("afterbegin",'<li class="shopping-carg '.concat(e._id,'" >\n                    <img class="shopping-carg-image" src="').concat(e.book_image,'" alt="" />\n                    <div class="">\n                        <div class="">\n                            <div>\n                                <h2 class="shopping-carg-book-title">').concat(e.title,'</h2>\n                                <p class="shopping-carg-book-author">').concat(e.author,'</p>\n                                <p class="shopping-carg-book-description">').concat(e.description||"There is no description","</p>\n                            </div>\n                        </div>\n                    </div>\n                </li>")),e.buy_links.map((function(e){"Amazon"===e.name&&bookInfo.insertAdjacentHTML("beforeend",'<li class="pop_shop-item">\n                            <a\n                            class="pop_shop__link link"\n                            href="'.concat(e.url,'"\n                            target="_blank"\n                            rel="noopener noreferrer"\n                            ><img\n                                class="pop_list-img"\n                                src="').concat(d,'" \n                                alt="amazon_shop_icon"/>\n                            </a>\n                        </li>')),"Apple Books"===e.name&&bookInfo.insertAdjacentHTML("beforeend",'<li class="pop_shop-item">\n                    <a\n                    class="pop_shop__link link"\n                    href="'.concat(e.url,'"\n                    target="_blank"\n                    rel="noopener noreferrer"\n                    ><img\n                        class="pop_list-img"\n                        src="').concat(p,'" \n                        alt="applebooks_shop_icon"\n                    />\n                    </a>\n                </li>')),"Bookshop"===e.name&&bookInfo.insertAdjacentHTML("beforeend",'<li class="pop_shop-item">\n                    <a\n                    class="pop_shop__link link"\n                    href="'.concat(e.url,'"\n                    target="_blank"\n                    rel="noopener noreferrer"\n                    ><img\n                        class="pop_list-img"\n                        src="').concat(g,'" \n                        alt="bookstore_shop_icon"\n                    />\n                    </a>\n                    </li>\n                    '))}))})),modal.style.display="block",document.getElementsByClassName("close")[0].onclick=function(){modal.style.display="none",bookInfo.innerHTML=""}}))}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}}window.onclick=function(e){e.target==modal&&(modal.style.display="none",bookInfo.innerHTML="")},window.addEventListener("keydown",(function(e){"Escape"===e.key&&(modal.style.display="none",bookInfo.innerHTML="")})),f.addEventListener("click",(function(e){var n=localStorage.getItem("User-name"),t=JSON.parse(n);console.log(t.name),console.log(t.email);var r=t.name,a=t.email;t.listId.push(c),localStorage.setItem("User-name",JSON.stringify({name:r,email:a,listId:t.listId}));e.target.innerHTML;var o="Add to shopping list";f.innerHtml===o?f.innerHtml="Remove from the shopping list":f.innerHtml=o}));var _={allCategoryContainer:document.querySelector(".bestSellers__container"),bestsellerContainer:document.querySelector(".bestSellers"),sectionTitle:document.querySelector(".section-title"),cardsQuantityByCategory:1,tabletWidth:768,pcWidth:1440};function v(e){var n=e.split(" "),t=e.substr(n[0].length);return'<span class="section-title">'.concat(n[0],"</span>\n  <span class='section-title--highlight'>").concat(t,"</span>")}function k(){return!(!localStorage.getItem("selected-category")||"undefined"==localStorage.getItem("selected-category"))}function w(){return document.documentElement.clientWidth}function L(){var e=document.querySelectorAll(".button__see-more"),n=!0,t=!1,r=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0)button=a.value,button.addEventListener("click",(function(e){localStorage.setItem("selected-category",e.target.dataset.category),A()}))}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}}function x(){var e=document.querySelectorAll(".categories__item"),n=!0,t=!1,r=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0)link=a.value,link.addEventListener("click",(function(e){localStorage.getItem("selected-category")!==e.target.dataset.category&&(localStorage.setItem("selected-category",e.target.dataset.category),A())}))}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}}var T,C=function(){var n=e(s)(e(l).mark((function n(){var t,r,a,o;return e(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!k()){e.next=10;break}return e.next=3,fetch("https://books-backend.p.goit.global/books/category?category=".concat(localStorage.getItem("selected-category")));case 3:return t=e.sent,e.next=6,t.json();case 6:return r=e.sent,e.abrupt("return",r);case 10:return e.next=12,fetch("https://books-backend.p.goit.global/books/top-books");case 12:return a=e.sent,e.next=15,a.json();case 15:return o=e.sent,e.abrupt("return",o);case 17:case"end":return e.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),S=function(){var n=e(s)(e(l).mark((function n(){var t,r;return e(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(cardsQuantityByCategory=1,w()>=_.tabletWidth&&(_.cardsQuantityByCategory=3),w()>=_.pcWidth&&(_.cardsQuantityByCategory=5),!k()){e.next=10;break}return e.next=6,C().then((function(e){return e.map((function(e){return e}))}));case 6:return t=e.sent,e.abrupt("return",t);case 10:return e.next=12,C().then((function(e){return e.map((function(e){return e.books.filter((function(e){return e.rank<=_.cardsQuantityByCategory}))}))}));case 12:return r=e.sent,e.abrupt("return",r);case 14:case"end":return e.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();function M(){return j.apply(this,arguments)}function j(){return(j=e(s)(e(l).mark((function n(){var t,r;return e(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S();case 2:for(promise=e.sent,_.sectionTitle.innerHTML="",_.sectionTitle.insertAdjacentHTML("afterbegin",'<span>BestSellers<span><span class="section-title--highlight">Books</span>'),r=0;r<promise.length;r++)categoryContainer=document.createElement("div"),categoryContainer.classList.add("category-container"),promise[r].map((function(e){t=e.list_name,m(e),categoryContainer.insertAdjacentHTML("beforeend",cardMarkup)})),categoryContainer.insertAdjacentHTML("afterbegin",'<h3 class="category-title">'.concat(t,"</h3>")),categoryContainer.insertAdjacentHTML("beforeend",h(t)),_.allCategoryContainer.insertAdjacentElement("beforeend",categoryContainer);L(),b(),x();case 10:case"end":return e.stop()}}),n)})))).apply(this,arguments)}function I(){return H.apply(this,arguments)}function H(){return(H=e(s)(e(l).mark((function n(){var t;return e(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S();case 2:for(promise=e.sent,categoryContainer=document.createElement("div"),categoryContainer.classList.add("category-container"),t=0;t<promise.length;t++)y(promise[t]),categoryContainer.insertAdjacentHTML("beforeend",cardMarkup);_.allCategoryContainer.insertAdjacentElement("beforeend",categoryContainer),L(),b(),x();case 10:case"end":return e.stop()}}),n)})))).apply(this,arguments)}function A(){return E.apply(this,arguments)}function E(){return(E=e(s)(e(l).mark((function n(){return e(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_.allCategoryContainer.innerHTML="",k()?(_.sectionTitle.innerHTML="",_.sectionTitle.insertAdjacentHTML("afterbegin",v(localStorage.getItem("selected-category"))),I()):M();case 2:case"end":return e.stop()}}),n)})))).apply(this,arguments)}A(),T=w()<768?375:w()>=768&&w()<1440?768:1440,addEventListener("resize",(function(e){(window.innerWidth>767&&T<768||window.innerWidth>1439&&T<1440||window.innerWidth<1440&&T>1439||window.innerWidth<768&&T>767)&&location.reload()})),a("iNWLi"),a("c01wF")}();
//# sourceMappingURL=index.d20f4231.js.map
