!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},o=t.parcelRequired7c6;null==o&&((o=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var o={id:e,exports:{}};return n[e]=o,t.call(o.exports,o,o.exports),o.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){r[e]=t},t.parcelRequired7c6=o),o("iE7OH").register(JSON.parse('{"EVgbq":"index.c4148c64.js","kFa2i":"amazon.99ff1432.jpg","hB25g":"applebooks.d7160da7.jpg","dZRhD":"bookstore.1c5b9883.jpg","flyHP":"index.9ccfd370.js"}'));var a=document.querySelector(".categories__list");fetch("https://books-backend.p.goit.global/books/category-list").then((function(e){return e.json()})).then((function(e){var t=e.sort((function(e,t){return e.list_name<t.list_name?-1:e.list_name>t.list_name?1:0})).map((function(e){var t=e.list_name;return'<li class = "categories__item"><a href = "#" data-category = "'.concat(t,'" class = "categories__link">').concat(t,"</a></li>")}));return a.insertAdjacentHTML("beforeend",t.join("")),console.log(t),t}));o("i8Q71");var i=document.querySelector(".modal-start"),s=document.querySelector(".backdrop-start"),l=document.querySelector(".login-btn"),c=document.querySelector(".modal__button-x"),d=document.querySelector("div[data-modal-start]"),u=document.querySelector('label[for="user_person"]'),m=document.querySelector("#user_person"),p=document.querySelector('label[for="user_email"]'),f=document.querySelector("#user_email"),g=document.querySelector('label[for="user_password"]'),y=document.querySelector("#user_password");function v(){var e=!0;return""===m.value.trim()?(m.classList.add("modal-form__field-input--error"),e=!1):m.classList.remove("modal-form__field-input--error"),""!==f.value.trim()&&f.checkValidity()?f.classList.remove("modal-form__field-input--error"):(f.classList.add("modal-form__field-input--error"),e=!1),""===y.value.trim()||y.length<5||y.value.length>12?(y.classList.add("modal-form__field-input--error"),e=!1):y.classList.remove("modal-form__field-input--error"),e}m.addEventListener("focus",(function(e){return console.log(u.style.top="5%")})),f.addEventListener("focus",(function(e){return console.log(p.style.top="5%")})),y.addEventListener("focus",(function(e){return console.log(g.style.top="5%")})),i.addEventListener("submit",(function(e){e.preventDefault(),v()?(console.log("Form send!"),s.classList.add("is-hidden-start"),s.style.display="none"):console.log("Error!")})),l.addEventListener("click",(function(e){i.style.display="block"})),c.addEventListener("click",(function(e){i.style.display="none"})),window.addEventListener("keydown",(function(e){"Escape"===e.key&&("Escape"!==e.key||i.contains(document.activeElement)||(i.classList.add("is-hidden-start"),s.classList.add("is-hidden-start")))})),s.addEventListener("click",(function(e){i&&e.target===s&&(i.classList.add("is-hidden-start"),s.classList.add("is-hidden-start"))})),l.addEventListener("click",(function(e){"none"===d.style.display&&(d.removeAttribute("style"),i.removeAttribute("style"))}));var h=document.querySelector('button[aria-label="link sing up"]'),b=document.querySelector('button[aria-label="link sing in"]');h.classList.add("active"),h.addEventListener("click",(function(e){e.preventDefault(),i.style.height="516px",h.classList.add("active"),b.classList.remove("active"),i.classList.remove("sing-in"),u.style.display="block",m.style.display="block",m.parentElement.parentElement.classList.remove("is-invalid"),m.parentElement.parentElement.classList.add("is-valid"),i.style.height="516px"})),b.addEventListener("click",(function(e){e.preventDefault(),b.classList.add("active"),h.classList.remove("active"),i.classList.remove("sing-in"),i.style.height="450px",u.style.display="none",m.style.display="none",m.parentElement.parentElement.classList.add("is-invalid"),m.parentElement.parentElement.classList.remove("is-valid"),v()})),function(){var e={openModalBtnSingUp:document.querySelector("button[data-modal-start-open--sing-up]"),closeModalBtnXClose:document.querySelector("button[data-modal-start-close]"),formEl:document.querySelector("[data-modal-start]"),menu:document.querySelector("[data-menu]"),menuList:document.querySelector(".nav-list"),logOutBtn:document.querySelector(".login-btn")};function t(){e.formEl.classList.toggle("is-hidden-start"),e.formEl.classList.toggle("display"),console.log(e.menuList),e.formEl.classList.contains("display")&&(e.logOutBtn.classList.add("nav-hidden"),e.menuList.classList.add("nav-hidden"),e.menu.classList.add("mobile-is-hidden"))}e.openModalBtnSingUp.addEventListener("click",t),e.closeModalBtnXClose.addEventListener("click",t)}(),o("5xh86"),o("7ghbD"),o("6mUVg");var _,L,k,E=o("bpxeT"),S=o("2TvXO"),H=(E=o("bpxeT"),S=o("2TvXO"),L=e(E)(e(S).mark((function t(n){var r,o;return e(S).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _=n,e.next=3,fetch("https://books-backend.p.goit.global/books/".concat(n));case 3:return r=e.sent,e.next=6,r.json();case 6:return o=e.sent,console.log(o),e.abrupt("return",o);case 9:case"end":return e.stop()}}),t)}))),function(e){return L.apply(this,arguments)});k=o("aNJCr").getBundleURL("EVgbq")+o("iE7OH").resolve("kFa2i");var T,w=new URL(k);T=o("aNJCr").getBundleURL("EVgbq")+o("iE7OH").resolve("hB25g");var x,M=new URL(T);x=o("aNJCr").getBundleURL("EVgbq")+o("iE7OH").resolve("dZRhD");var I=new URL(x),q=document.querySelector(".pop__btn"),A=document.getElementById("bookInfoUrl"),B=document.getElementById("bookInfo"),j=document.getElementById("bookInform"),C=document.querySelector(".pop-text");function U(e){H(e).then((function(e){B.insertAdjacentHTML("afterbegin","<li ".concat(e._id,'" >\n        <div class="modal-card__flex">\n          <div class="modal-card">\n          <img class="modal-card__image" src="').concat(e.book_image,'" alt="" />\n          \n        </div>\n        \n        </div>\n      </li>')),j.insertAdjacentHTML("afterbegin",'<div>\n          <h2 class="modal-card__title">'.concat(e.title,'</h2>\n          <p class="modal-card__author">').concat(e.author,'</p>\n          <p class="modal-card__description">').concat(e.description||"There is no description","</p>\n        </div>")),e.buy_links.map((function(e){"Amazon"===e.name&&A.insertAdjacentHTML("beforeend",'<li class="pop_shop-item">\n                            <a\n                            class="pop_shop__link link"\n                            href="'.concat(e.url,'"\n                            target="_blank"\n                            rel="noopener noreferrer"\n                            ><img\n                                class="modal_list-img"\n                                src="').concat(w,'" \n                                alt="amazon_shop_icon"/>\n                            </a>\n                        </li>')),"Apple Books"===e.name&&A.insertAdjacentHTML("beforeend",'<li class="pop_shop-item">\n                    <a\n                    class="pop_shop__link link"\n                    href="'.concat(e.url,'"\n                    target="_blank"\n                    rel="noopener noreferrer"\n                    ><img\n                        class="pop_list-img"\n                        src="').concat(M,'" \n                        alt="applebooks_shop_icon"\n                    />\n                    </a>\n                </li>')),"Bookshop"===e.name&&A.insertAdjacentHTML("beforeend",'<li class="pop_shop-item">\n                    <a\n                    class="pop_shop__link link"\n                    href="'.concat(e.url,'"\n                    target="_blank"\n                    rel="noopener noreferrer"\n                    ><img\n                        class="pop_list-img"\n                        src="').concat(I,'" \n                        alt="bookstore_shop_icon"\n                    />\n                    </a>\n                    </li>\n                    '))}))})),modal.style.display="block",document.getElementsByClassName("modal-btn")[0].onclick=function(){q.removeEventListener("click",O,!1),modal.style.display="none",A.innerHTML="",B.innerHTML="",j.innerHTML=""},window.addEventListener("keydown",(function(e){"Escape"===e.key&&(q.removeEventListener("click",O,!1),modal.style.display="none",A.innerHTML="",B.innerHTML="",j.innerHTML="")})),function(){q.dataset.id=_,null==localStorage.getItem("User-name")&&localStorage.setItem("User-name",JSON.stringify({name:"Not Authorized",email:"Not Authorized",listId:[]}));var e=localStorage.getItem("User-name");-1==JSON.parse(e).listId.indexOf(_)?(console.log("ID:",_,"not found"),q.innerHTML="Add to shopping list",C.innerHTML=" "):(console.log("ID:",_,"found"),q.innerHTML="remove from the shopping lis",C.innerHTML="Сongratulations! You have added the book to the shopping list. To delete, press the button “Remove from the shopping list”.");q.addEventListener("click",O,!1)}()}window.onclick=function(e){e.target==modal&&(q.removeEventListener("click",O,!1),modal.style.display="none",A.innerHTML="",B.innerHTML="",j.innerHTML="")},window.addEventListener("keydown",(function(e){"Escape"===e.key&&(q.removeEventListener("click",O,!1),modal.style.display="none",A.innerHTML="",B.innerHTML="",j.innerHTML="")}));var O=function(e){var t=q.dataset.id,n=localStorage.getItem("User-name"),r=JSON.parse(n),o=r.name,a=r.email;if(console.log("ListId from LocalStorage:",r.listId),console.log("CurrentId from Button",t),-1==r.listId.indexOf(t))r.listId.push(t),localStorage.setItem("User-name",JSON.stringify({name:o,email:a,listId:r.listId})),console.log("Item was added"),e.target.innerHTML="remove from the shopping list",C.innerHTML="Сongratulations! You have added the book to the shopping list. To delete, press the button “Remove from the shopping list”.",q.removeEventListener("click",O,!1),q.addEventListener("click",O,!1);else{var i=r.listId.filter((function(e){return e!=t}));localStorage.setItem("User-name",JSON.stringify({name:o,email:a,listId:i})),console.log("Item was deleted"),e.target.innerHTML="Add to shopping list",C.innerHTML="",q.removeEventListener("click",O,!1),q.addEventListener("click",O,!1)}};function R(e){return"\n  <ul class='bestseller-card'>\n  <li>\n    <div class = 'thumb'>\n      <img class='thumb__image' src='".concat(e.book_image,"' data-id='").concat(e._id,"' alt='").concat(e.title,"'/>\n        <div class=\"thumb__overlay\">\n        <p class=\"thumb__overlay-text\">QUICK VIEW</p>\n        </div> \n    </div>\n  </li>\n  <li>\n    <ul class='bestseller-card__meta'>\n      <li class='bestseller-card__title'>").concat(e.title,"</li>\n      <li class='bestseller-card__author'>").concat(e.author,"</li>\n    </ul\n  </li>\n  </ul>\n")}function N(e){return"\n      <ul class='bestseller-card --margin'>\n      <li>\n        <div class = 'thumb'>\n          <img class='thumb__image' src='".concat(e.book_image,"' data-id='").concat(e._id,"' alt='").concat(e.title,"'/>\n            <div class=\"thumb__overlay\">\n            <p class=\"thumb__overlay-text\">QUICK VIEW</p>\n            </div> \n        </div>\n      </li>\n      <li>\n        <ul class='bestseller-card__meta'>\n          <li class='bestseller-card__title'>").concat(e.title,"</li>\n          <li class='bestseller-card__author'>").concat(e.author,"</li>\n        </ul\n      </li>\n      </ul>\n    ")}function W(e){return"\n    <button class='button__see-more' type='button' name='See more' data-category='".concat(e,"'>See more</button>\n  ")}function D(){var e=document.querySelectorAll(".thumb__image"),t=!0,n=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){o.value.addEventListener("click",(function(e){U(e.target.dataset.id)}))}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}var F={allCategoryContainer:document.querySelector(".bestSellers__container"),bestsellerContainer:document.querySelector(".bestSellers"),sectionTitle:document.querySelector(".section-title"),cardsQuantityByCategory:1,tabletWidth:768,pcWidth:1440};function J(e){var t=e.split(" "),n=e.substr(t[0].length);return'<span class="section-title">'.concat(t[0],"</span>\n  <span class='section-title--highlight'>").concat(n,"</span>")}function Q(){return null!=localStorage.getItem("selected-category")&&"undefined"!==localStorage.getItem("selected-category")||(localStorage.getItem("selected-category"),!1)}function V(){return document.documentElement.clientWidth}function z(){var e=document.querySelectorAll(".button__see-more"),t=!0,n=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){o.value.addEventListener("click",(function(e){localStorage.setItem("selected-category",e.target.dataset.category),te()}))}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}function X(){var e=document.querySelectorAll(".categories__item"),t=document.querySelectorAll(".categories__link"),n=!0,r=!1,o=void 0;try{for(var a,i=e[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){a.value.addEventListener("click",(function(e){var n=!0,r=!1,o=void 0;try{for(var a,i=t[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){a.value.classList.remove("category-active")}}catch(e){r=!0,o=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}e.target.classList.add("category-active"),localStorage.getItem("selected-category")!==e.target.dataset.category&&(localStorage.setItem("selected-category",e.target.dataset.category),te())}))}}catch(e){r=!0,o=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}}var K,Y=function(){var t=e(E)(e(S).mark((function t(){var n,r,o,a;return e(S).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Q()){e.next=10;break}return e.next=3,fetch("https://books-backend.p.goit.global/books/category?category=".concat(localStorage.getItem("selected-category")));case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r);case 10:return e.next=12,fetch("https://books-backend.p.goit.global/books/top-books");case 12:return o=e.sent,e.next=15,o.json();case 15:return a=e.sent,e.abrupt("return",a);case 17:case"end":return e.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Z=function(){var t=e(E)(e(S).mark((function t(){var n,r;return e(S).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(F.cardsQuantityByCategory=1,V()>=F.tabletWidth&&(F.cardsQuantityByCategory=3),V()>=F.pcWidth&&(F.cardsQuantityByCategory=5),!Q()){e.next=10;break}return e.next=6,Y().then((function(e){return e.map((function(e){return e}))}));case 6:return n=e.sent,e.abrupt("return",n);case 10:return e.next=12,Y().then((function(e){return e.map((function(e){return e.books.filter((function(e){return e.rank<=F.cardsQuantityByCategory}))}))}));case 12:return r=e.sent,e.abrupt("return",r);case 14:case"end":return e.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();function P(){return G.apply(this,arguments)}function G(){return(G=e(E)(e(S).mark((function t(){var n,r,o,a;return e(S).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z();case 2:for(n=e.sent,F.sectionTitle.innerHTML="",F.sectionTitle.insertAdjacentHTML("afterbegin",'<span>BestSellers<span><span class="section-title--highlight">Books</span>'),o=0;o<n.length;o++)(a=document.createElement("div")).classList.add("category-container"),n[o].map((function(e){r=e.list_name,a.insertAdjacentHTML("beforeend",R(e))})),a.insertAdjacentHTML("afterbegin",'<h3 class="category-title">'.concat(r,"</h3>")),a.insertAdjacentHTML("beforeend",W(r)),F.allCategoryContainer.insertAdjacentElement("beforeend",a);z(),D(),X();case 10:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function $(){return ee.apply(this,arguments)}function ee(){return(ee=e(E)(e(S).mark((function t(){var n,r,o;return e(S).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z();case 2:for(n=e.sent,(r=document.createElement("div")).classList.add("category-container"),o=0;o<n.length;o++)r.insertAdjacentHTML("beforeend",N(n[o]));F.allCategoryContainer.insertAdjacentElement("beforeend",r),z(),D(),X();case 10:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function te(){return ne.apply(this,arguments)}function ne(){return(ne=e(E)(e(S).mark((function t(){return e(S).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:F.allCategoryContainer.innerHTML="",Q()?(F.sectionTitle.innerHTML="",F.sectionTitle.insertAdjacentHTML("afterbegin",J(localStorage.getItem("selected-category"))),$()):P();case 2:case"end":return e.stop()}}),t)})))).apply(this,arguments)}te(),K=V()<768?375:V()>=768&&V()<1440?768:1440,addEventListener("resize",(function(e){(window.innerWidth>767&&K<768||window.innerWidth>1439&&K<1440||window.innerWidth<1440&&K>1439||window.innerWidth<768&&K>767)&&location.reload()})),o("iNWLi"),o("c01wF")}();
//# sourceMappingURL=index.c4148c64.js.map
