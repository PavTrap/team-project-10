var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},o=e.parcelRequired7c6;null==o&&((o=function(e){if(e in t)return t[e].exports;if(e in n){var o=n[e];delete n[e];var a={id:e,exports:{}};return t[e]=a,o.call(a.exports,a,a.exports),a.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){n[e]=t},e.parcelRequired7c6=o);const a={categoriesList:document.querySelector(".categories__list")};fetch("https://books-backend.p.goit.global/books/category-list").then((e=>e.json())).then((e=>{const t=e.map((({list_name:e})=>`<li class = "categories__item"><a href = "#" data-category = "${e}" class = "categories__link">${e}</a></li>`));return a.categoriesList.insertAdjacentHTML("beforeend",t.join("")),console.log(t),t}));let s;o("bUb57"),o("ggeWI"),o("arj0A"),o("fF5e9"),o("lsbs5"),o("i9TW1");const i=new URL("file:///src/js/modal-window.js"),r=new URL("file:///src/js/modal-window.js"),l=new URL("file:///src/js/modal-window.js"),c=document.querySelector("#pop-btn");function d(e){(async e=>{s=e;const t=await fetch(`https://books-backend.p.goit.global/books/${e}`),n=await t.json();return console.log(n),n})(e).then((e=>{bookInfo.insertAdjacentHTML("afterbegin",`<li class="shopping-carg ${e._id}" >\n                    <img class="shopping-carg-image" src="${e.book_image}" alt="" />\n                    <div class="">\n                        <div class="">\n                            <div>\n                                <h2 class="shopping-carg-book-title">${e.title}</h2>\n                                <p class="shopping-carg-book-author">${e.author}</p>\n                                <p class="shopping-carg-book-description">${e.description||"There is no description"}</p>\n                            </div>\n                        </div>\n                    </div>\n                </li>`),e.buy_links.map((e=>{"Amazon"===e.name&&bookInfo.insertAdjacentHTML("beforeend",`<li class="pop_shop-item">\n                            <a\n                            class="pop_shop__link link"\n                            href="${e.url}"\n                            target="_blank"\n                            rel="noopener noreferrer"\n                            ><img\n                                class="pop_list-img"\n                                src="${i}" \n                                alt="amazon_shop_icon"/>\n                            </a>\n                        </li>`),"Apple Books"===e.name&&bookInfo.insertAdjacentHTML("beforeend",`<li class="pop_shop-item">\n                    <a\n                    class="pop_shop__link link"\n                    href="${e.url}"\n                    target="_blank"\n                    rel="noopener noreferrer"\n                    ><img\n                        class="pop_list-img"\n                        src="${r}" \n                        alt="applebooks_shop_icon"\n                    />\n                    </a>\n                </li>`),"Bookshop"===e.name&&bookInfo.insertAdjacentHTML("beforeend",`<li class="pop_shop-item">\n                    <a\n                    class="pop_shop__link link"\n                    href="${e.url}"\n                    target="_blank"\n                    rel="noopener noreferrer"\n                    ><img\n                        class="pop_list-img"\n                        src="${l}" \n                        alt="bookstore_shop_icon"\n                    />\n                    </a>\n                    </li>\n                    `)}))})),modal.style.display="block";document.getElementsByClassName("close")[0].onclick=function(){modal.style.display="none",bookInfo.innerHTML=""}}function g(e){return cardMarkup=`\n      <ul class='bestseller-card'>\n      <div class = 'thumb'>\n         <img class='thumb__image' src='${e.book_image}' data-id='${e._id}'/>\n      <div class="thumb__overlay">\n              <p class="thumb__overlay-tex">QUICK VIEW</p>\n            </div> </div>\n      </li>\n      <ul class='bestseller-card__meta'>\n        <li class='bestseller-card__title'>${e.title}</li>\n        <li class='bestseller-card__author'>${e.author}</li>\n      </ul\n      \n      </li>\n      </ul>\n    `}function p(){let e=document.querySelectorAll(".thumb__image");for(image of e)image.addEventListener("click",(e=>{console.log("dasdsadsa:",e.target.dataset.id),d(e.target.dataset.id)}))}window.onclick=function(e){e.target==modal&&(modal.style.display="none",bookInfo.innerHTML="")},window.addEventListener("keydown",(e=>{"Escape"===e.key&&(modal.style.display="none",bookInfo.innerHTML="")})),c.addEventListener("click",(e=>{const t=localStorage.getItem("User-name"),n=JSON.parse(t);console.log(n.name),console.log(n.email);const o=n.name,a=n.email;n.listId.push(s),localStorage.setItem("User-name",JSON.stringify({name:o,email:a,listId:n.listId}));e.target.innerHTML;const i="Add to shopping list";c.innerHtml===i?c.innerHtml="Remove from the shopping list":c.innerHtml=i}));const m={allCategoryContainer:document.querySelector(".bestSellers__container"),bestsellerContainer:document.querySelector(".bestSellers"),sectionTitle:document.querySelector(".section-title"),cardsQuantityByCategory:1,tabletWidth:768,pcWidth:1440};function u(){return!(!localStorage.getItem("selected-category")||"undefined"==localStorage.getItem("selected-category"))}function b(){return document.documentElement.clientWidth}function y(){let e=document.querySelectorAll(".button__see-more");for(button of e)button.addEventListener("click",(e=>{localStorage.setItem("selected-category",e.target.dataset.category),k()}))}function f(){let e=document.querySelectorAll(".categories__item");for(link of e)link.addEventListener("click",(e=>{localStorage.getItem("selected-category")!==e.target.dataset.category&&(localStorage.setItem("selected-category",e.target.dataset.category),k())}))}const h=async()=>{if(u()){const e=await fetch(`https://books-backend.p.goit.global/books/category?category=${localStorage.getItem("selected-category")}`);return await e.json()}{const e=await fetch("https://books-backend.p.goit.global/books/top-books");return await e.json()}},_=async()=>{if(cardsQuantityByCategory=1,b()>=m.tabletWidth&&(m.cardsQuantityByCategory=3),b()>=m.pcWidth&&(m.cardsQuantityByCategory=5),u()){return await h().then((e=>e.map((e=>e))))}return await h().then((e=>e.map((e=>e.books.filter((e=>e.rank<=m.cardsQuantityByCategory))))))};async function k(){m.allCategoryContainer.innerHTML="",u()?(m.sectionTitle.innerHTML="",m.sectionTitle.insertAdjacentHTML("afterbegin",function(e){let t=e.split(" "),n=e.substr(t[0].length);return`<span class="section-title">${t[0]}</span>\n  <span class='section-title--highlight'>${n}</span>`}(localStorage.getItem("selected-category"))),async function(){promise=await _(),categoryContainer=document.createElement("div"),categoryContainer.classList.add("category-container");for(let t=0;t<promise.length;t++)e=promise[t],cardMarkup=`\n      <ul class='bestseller-card --margin'>\n      <div class = 'thumb'>\n         <img class='thumb__image' src='${e.book_image}' data-id='${e._id}'/>\n      <div class="thumb__overlay">\n              <p class="thumb__overlay-text">QUICK VIEW</p>\n            </div> </div>\n      </li>\n      <ul class='bestseller-card__meta'>\n        <li class='bestseller-card__title'>${e.title}</li>\n        <li class='bestseller-card__author'>${e.author}</li>\n      </ul\n      \n      </li>\n      </ul>\n    `,categoryContainer.insertAdjacentHTML("beforeend",cardMarkup);var e;m.allCategoryContainer.insertAdjacentElement("beforeend",categoryContainer),y(),p(),f()}()):async function(){let e;promise=await _(),m.sectionTitle.innerHTML="",m.sectionTitle.insertAdjacentHTML("afterbegin",'<span>BestSellers<span><span class="section-title--highlight">Books</span>');for(let t=0;t<promise.length;t++)categoryContainer=document.createElement("div"),categoryContainer.classList.add("category-container"),promise[t].map((t=>{e=t.list_name,g(t),categoryContainer.insertAdjacentHTML("beforeend",cardMarkup)})),categoryContainer.insertAdjacentHTML("afterbegin",`<h3 class="category-title">${e}</h3>`),categoryContainer.insertAdjacentHTML("beforeend",cardMarkup=`\n    <button class='button__see-more' type='button' data-category='${e}'>See more</button>\n  `),m.allCategoryContainer.insertAdjacentElement("beforeend",categoryContainer);y(),p(),f()}()}k(),function(){let e;e=b()<768?375:b()>=768&&b()<1440?768:1440,addEventListener("resize",(t=>{(window.innerWidth>767&&e<768||window.innerWidth>1439&&e<1440||window.innerWidth<1440&&e>1439||window.innerWidth<768&&e>767)&&location.reload()}))}(),o("2ix2C"),o("lJ5oQ");
//# sourceMappingURL=index.6c2e823a.js.map
