{"mappings":"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","sources":["src/js/categories.js","src/js/modal-window.js","src/js/card-books.js","src/js/bestsellers.js"],"sourcesContent":["const refs = {\n  categoriesList: document.querySelector('.categories__list'),\n};\n\nconst fetchArray = fetch(\n  'https://books-backend.p.goit.global/books/category-list'\n)\n  .then(response => response.json())\n  .then(data => {\n    const array = data.map(({ list_name }) => {\n      return `<li class = \"categories__item\"><a href = \"#\" data-category = \"${list_name}\" class = \"categories__link\">${list_name}</a></li>`;\n    });\n    refs.categoriesList.insertAdjacentHTML('beforeend', array.join(''));\n    console.log(array);\n    return array;\n  });\n","// Функція для відкриття модального вікна та заповнення його даними з API\nexport function openModal() {\n\n    // Відобразити модальне вікно\n    modal.style.display = \"block\";\n\n    // Додати обробник події на кнопку закриття модального вікна\n    const closeButton = document.getElementsByClassName(\"close\")[0];\n    closeButton.onclick = function () {\n        modal.style.display = \"none\";\n    };\n}\n\nwindow.onclick = function (event) {\n    if (event.target == modal) {\n        modal.style.display = \"none\";\n    }\n}\n\nwindow.addEventListener('keydown', event => {\n    if (event.key === 'Escape') {\n        modal.style.display = \"none\";\n    }\n});","import { openModal } from './modal-window';\nexport { cardRenderByTop, cardRenderByCat, renderButton, imageButtonsHandler };\n\n//------------------Шаблон рендера карток\nfunction cardRenderByTop(obj) {\n  return (cardMarkup = `\n      <ul class='bestseller-card'>\n      <div class = 'thumb'>\n         <img class='thumb__image' src='${obj.book_image}' data-id='${obj._id}'/>\n      <div class=\"thumb__overlay\">\n              <p class=\"thumb__overlay-tex\">QUICK VIEW</p>\n            </div> </div>\n      </li>\n      <ul class='bestseller-card__meta'>\n        <li class='bestseller-card__title'>${obj.title}</li>\n        <li class='bestseller-card__author'>${obj.author}</li>\n      </ul\n      \n      </li>\n      </ul>\n    `);\n}\nfunction cardRenderByCat(obj) {\n  return (cardMarkup = `\n      <ul class='bestseller-card --margin'>\n      <div class = 'thumb'>\n         <img class='thumb__image' src='${obj.book_image}' data-id='${obj._id}'/>\n      <div class=\"thumb__overlay\">\n              <p class=\"thumb__overlay-text\">QUICK VIEW</p>\n            </div> </div>\n      </li>\n      <ul class='bestseller-card__meta'>\n        <li class='bestseller-card__title'>${obj.title}</li>\n        <li class='bestseller-card__author'>${obj.author}</li>\n      </ul\n      \n      </li>\n      </ul>\n    `);\n}\nfunction renderButton(category) {\n  return (cardMarkup = `\n    <button class='button__see-more' type='button' data-category='${category}'>See more</button>\n  `);\n}\nfunction imageButtonsHandler() {\n  let imageList = document.querySelectorAll('.thumb__image');\n  for (image of imageList) {\n    image.addEventListener('click', e => {\n      // localStorage.setItem('selected-id', e.target.dataset.id);\n      console.log('dasdsadsa:', e.target.dataset.id);\n      //console.log('Вибрана книга з ID:', localStorage.getItem('selected-id'));\n      openModal(e.target.dataset.id);\n      const bookInfo = document.getElementById(\"bookInfo\");\n      bookInfo.insertAdjacentHTML('beforeend',\n        `\n\n        <div class='pop_wrapper'>\n        <h2 class=\"pop_name\">\n        ${e.target.dataset.title}\n        </h2>\n        <p class=\"pop_author\">hello</p>\n        <p class=\"pop_description\">\n        \n        </p>\n        <ul class=\"pop_shop list\"></ul>\n        </div>`);\n    });\n  }\n}\n","//------------------Імпорт пакетів/стилі/шаблонів\nimport {\n  cardRenderByTop,\n  cardRenderByCat,\n  renderButton,\n  imageButtonsHandler,\n} from './card-books.js';\n//------------------Імпорт пакетів/стилі/шаблонів\n\n//------------------Змінні\nconst refs = {\n  allCategoryContainer: document.querySelector('.bestSellers__container'),\n  bestsellerContainer: document.querySelector('.bestSellers'),\n  sectionTitle: document.querySelector('.section-title'),\n  cardsQuantityByCategory: 1,\n  tabletWidth: 768,\n  pcWidth: 1440,\n};\n\n//------------------Змінні\n\n//------------------Додаткові функції\nfunction changeTitleColors(string) {\n  let arrayFromString = string.split(' ');\n  let tempString = string.substr(arrayFromString[0].length);\n  let result = `<span class=\"section-title\">${arrayFromString[0]}</span>\n  <span class='section-title--highlight'>${tempString}</span>`;\n  return result;\n}\n\nfunction isCategorySelected() {\n  if (\n    localStorage.getItem('selected-category') &&\n    localStorage.getItem('selected-category') != 'undefined'\n  ) {\n    return true;\n  }\n  return false;\n}\nfunction checkWindowWidth() {\n  return document.documentElement.clientWidth;\n}\nfunction reloadPage() {\n  let currentRenderWidth;\n  if (checkWindowWidth() < 768) {\n    currentRenderWidth = 375;\n  } else if (checkWindowWidth() >= 768 && checkWindowWidth() < 1440) {\n    currentRenderWidth = 768;\n  } else {\n    currentRenderWidth = 1440;\n  }\n  addEventListener('resize', event => {\n    if (\n      (window.innerWidth > 767 && currentRenderWidth < 768) ||\n      (window.innerWidth > 1439 && currentRenderWidth < 1440) ||\n      (window.innerWidth < 1440 && currentRenderWidth > 1439) ||\n      (window.innerWidth < 768 && currentRenderWidth > 767)\n    ) {\n      location.reload();\n    }\n  });\n}\n\nfunction seeMoreButtonsHandler() {\n  let buttonsList = document.querySelectorAll('.button__see-more');\n  for (button of buttonsList) {\n    button.addEventListener('click', e => {\n      localStorage.setItem('selected-category', e.target.dataset.category);\n      renderDOM();\n    });\n  }\n}\n\nfunction categoriesLinksHandler() {\n  let linksList = document.querySelectorAll('.categories__item');\n  for (link of linksList) {\n    link.addEventListener('click', e => {\n      if (\n        localStorage.getItem('selected-category') === e.target.dataset.category\n      ) {\n        return;\n      }\n      localStorage.setItem('selected-category', e.target.dataset.category);\n      renderDOM();\n    });\n  }\n}\n//------------------Додаткові функції\n\n//------------------Запрос на API\nconst fetchBook = async () => {\n  if (isCategorySelected()) {\n    const response = await fetch(\n      `https://books-backend.p.goit.global/books/category?category=${localStorage.getItem(\n        'selected-category'\n      )}`\n    );\n    const book = await response.json();\n    return book;\n  } else {\n    const response = await fetch(\n      `https://books-backend.p.goit.global/books/top-books`\n    );\n    const book = await response.json();\n    return book;\n  }\n};\n//------------------Запрос на API\n\n//------------------Функція запроса даних по ТОП книгам в категорії\nconst fetchedArrayByTop = async () => {\n  cardsQuantityByCategory = 1;\n  if (checkWindowWidth() >= refs.tabletWidth) {\n    refs.cardsQuantityByCategory = 3;\n  }\n  if (checkWindowWidth() >= refs.pcWidth) {\n    refs.cardsQuantityByCategory = 5;\n  }\n  if (isCategorySelected()) {\n    const data = await fetchBook().then(item => {\n      const result = item.map(value => {\n        return value;\n      });\n      return result;\n    });\n    return data;\n  } else {\n    const data = await fetchBook().then(item => {\n      const result = item.map(value => {\n        const filteredByRank = value.books.filter(data => {\n          return data.rank <= refs.cardsQuantityByCategory;\n        });\n        return filteredByRank;\n      });\n      return result;\n    });\n    return data;\n  }\n};\n//------------------Функція запроса даних по ТОП книгам в категорії\n\n//------------------Фукнція рендера карток\nasync function renderFetchByTop() {\n  promise = await fetchedArrayByTop();\n\n  let currentCategory;\n  refs.sectionTitle.innerHTML = '';\n  refs.sectionTitle.insertAdjacentHTML(\n    'afterbegin',\n    `<span>BestSellers<span><span class=\"section-title--highlight\">Books</span>`\n  );\n  for (let i = 0; i < promise.length; i++) {\n    categoryContainer = document.createElement('div');\n    categoryContainer.classList.add('category-container');\n\n    promise[i].map(obj => {\n      currentCategory = obj.list_name;\n      cardRenderByTop(obj);\n      categoryContainer.insertAdjacentHTML('beforeend', cardMarkup);\n    });\n    categoryContainer.insertAdjacentHTML(\n      'afterbegin',\n      `<h3 class=\"category-title\">${currentCategory}</h3>`\n    );\n    categoryContainer.insertAdjacentHTML(\n      'beforeend',\n      renderButton(currentCategory)\n    );\n\n    refs.allCategoryContainer.insertAdjacentElement(\n      'beforeend',\n      categoryContainer\n    );\n  }\n  seeMoreButtonsHandler();\n  imageButtonsHandler();\n  categoriesLinksHandler();\n}\nasync function renderFetchByCat() {\n  promise = await fetchedArrayByTop();\n  categoryContainer = document.createElement('div');\n  categoryContainer.classList.add('category-container');\n  for (let i = 0; i < promise.length; i++) {\n    cardRenderByCat(promise[i]);\n    categoryContainer.insertAdjacentHTML('beforeend', cardMarkup);\n  }\n  refs.allCategoryContainer.insertAdjacentElement(\n    'beforeend',\n    categoryContainer\n  );\n  seeMoreButtonsHandler();\n  imageButtonsHandler();\n  categoriesLinksHandler();\n}\nasync function renderDOM() {\n  refs.allCategoryContainer.innerHTML = '';\n  if (isCategorySelected()) {\n    refs.sectionTitle.innerHTML = '';\n    refs.sectionTitle.insertAdjacentHTML(\n      'afterbegin',\n      changeTitleColors(localStorage.getItem('selected-category'))\n    );\n    renderFetchByCat();\n  } else {\n    renderFetchByTop();\n  }\n}\n//------------------Фукнція рендера карток\n\nrenderDOM();\nreloadPage();\n"],"names":["$f3b06000f9b46fbb$var$refs","categoriesList","document","querySelector","fetch","then","response","json","data","array","map","list_name","insertAdjacentHTML","join","console","log","$1aa81d6d0cd85e48$export$a7f6cffb6b8ba11c","modal","style","display","getElementsByClassName","onclick","$88bd80a468793ba9$export$d433905d0c2a957b","obj","cardMarkup","book_image","_id","title","author","$88bd80a468793ba9$export$44cf0dba34b90ce0","imageList","querySelectorAll","image","addEventListener","e","target","dataset","id","getElementById","window","event","key","$cba43eba05963282$var$refs","allCategoryContainer","bestsellerContainer","sectionTitle","cardsQuantityByCategory","tabletWidth","pcWidth","$cba43eba05963282$var$isCategorySelected","localStorage","getItem","$cba43eba05963282$var$checkWindowWidth","documentElement","clientWidth","$cba43eba05963282$var$seeMoreButtonsHandler","buttonsList","button","setItem","category","$cba43eba05963282$var$renderDOM","$cba43eba05963282$var$categoriesLinksHandler","linksList","link","$cba43eba05963282$var$fetchBook","async","$cba43eba05963282$var$fetchedArrayByTop","item","value","books","filter","rank","innerHTML","string","arrayFromString","split","tempString","substr","length","$cba43eba05963282$var$changeTitleColors","promise","categoryContainer","createElement","classList","add","i","insertAdjacentElement","$cba43eba05963282$var$renderFetchByCat","currentCategory","$cba43eba05963282$var$renderFetchByTop","currentRenderWidth","innerWidth","location","reload","$cba43eba05963282$var$reloadPage"],"version":3,"file":"index.21128bbd.js.map"}